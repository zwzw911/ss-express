var app=angular.module("app",["inputDefineApp","generalFuncApp"]);app.factory("initGetAllData",["$http",function(a){var b=function(){return a.post("main",{},{})};return{getInitData:b}}]),app.controller("MainController",["$scope","initGetAllData","inputDefine","func","$window",function(a,b,c,d,e){a.lastWeek=[{},{}],a.latestArticle={},a.latestArticle.loadingFlag=!0,a.showHidelastWeek=function(a){a.showFlag=!a.showFlag};var f=function(b){a.latestArticle.articleList=[],void 0!==b&&0<b.length&&b.forEach(function(b){a.latestArticle.articleList.push({hashId:b.hashId,title:b.title,author:b.author.name,keys:b.keys,mDateConv:b.mDateConv,content:b.pureContent})})};setTimeout(function(){var c=b.getInitData();c.success(function(b,c,e,g){a.latestArticle.loadingFlag=!1,0===b.rc?(a.lastWeek[0].articleList=b.msg.lastWeekCollect,a.lastWeek[1].articleList=b.msg.lastWeekClick,f(b.msg.latestArticle),a.userInfo=b.msg.userInfo):a.errorModal=d.showErrMsg(b.msg)}).error(function(a,b,c,d){})},500),a.quit=function(){var a=d.quit();a.success(function(a,b,c,d){0===a.rc&&(e.location.href="main")}).error(function(a,b,c,d){})},a.search=function(){var b=d.convertInputSearchString(a.searchString,c.search.searchTotalKeyLen.define);return!1===b?!1:void(e.location.href="searchResult?wd="+b)}}]);