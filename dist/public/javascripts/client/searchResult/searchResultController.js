var app=angular.module("app",["generalFuncApp","inputDefineApp"]);app.factory("dataService",["$http",function(a){var b=function(b,c){return a.post("searchResult",{wd:b,curPage:c},{})};return{getSearchResult:b}}]),app.controller("searchResultController",["$scope","dataService","$location","$window","func","inputDefine","$sce",function(a,b,c,d,e,f,g){var h=function(){var b=c.absUrl(),d=b.split("=").pop();if(d===b)return a.errorModal=e.showErrMsg(f.search.format.msg),!1;if(""===d)return a.errorModal=e.showErrMsg(f.search.format.msg),!1;for(var g=d.split("+"),h="",i=0;i<g.length;i++)h+=g[i],h+=" ";return h.trim()},i=function(c,d){var f=b.getSearchResult(d,c);f.success(function(b,c,d,f){0===b.rc?void 0!==b.msg&&(b.msg.results.forEach(function(a){a.title=g.trustAsHtml(a.title),a.pureContent=g.trustAsHtml(a.pureContent),a.keys.forEach(function(a){a=g.trustAsHtml(a)})}),a.results=b.msg.results,a.userInfo=b.msg.userInfo,a.pageRange=e.generatePaginationRange(b.msg.pagination),a.paginationInfo=b.msg.pagination):a.errorModal=e.showErrMsg(b.msg)}).error(function(a,b,c,d){})};a.results,a.paginationInfo,key=h(),key===!1?d.location.href="searchPage":setTimeout(function(){i(1,key)},500),a.getSearchResult=function(a){key=h(),key===!1?d.location.href="searchPage":i(a,key)},a.quit=function(){var a=e.quit();a.success(function(a,b,c,e){0===a.rc&&(d.location.href="main")}).error(function(a,b,c,d){})},a.search=function(){var b=e.convertInputSearchString(a.searchString,f.search.searchTotalKeyLen.define);return!1===b?!1:void(d.location.href="searchResult?wd="+b)}}]);