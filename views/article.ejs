<!DOCTYPE html>
<html lang="zh-cmn-Hans" ng-app="app">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta content="width=device-width,initial-scale=1" name="viewport">

    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="/stylesheets/common.css"/>
    <link rel="stylesheet" href="/stylesheets/bootstrap.css"/>
    <link rel="stylesheet" href="/stylesheets/font-awesome.min.css"/>
</head>
<body ng-app="app">
<div ng-controller="ArticleController"><!--只是为了设置controller，如果在header和article上设置通过一个controller，会无法同步-->
    <header >
        <nav class="nvabar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="row">
                    <div class="nav navbar-btn center">

                        <button id='edit' type="button" class="btn  btn-primary marginR_2" ng-disabled="btn.edit.disabled" ng-click="btnClick(btn.edit)">
                            <span class="fa fa-pencil marginR_1"></span>编辑
                        </button>
                        <button id='cancel' type="button" class="btn  btn-danger marginR_2 marginL_2" ng-disabled="btn.cancel.disabled" ng-click="btnClick(btn.cancel)">
                            <span class="fa fa-undo marginR_1"></span>取消
                        </button>
                        <button id='save' type="button" class="btn  btn-success marginL_2" ng-disabled="btn.save.disabled" ng-click="btnClick(btn.save)">
                            <span class="fa fa-save marginR_1"></span>保存
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <article class="marginT_4">
        <div class="container" ng-init="article.editFlag=false">
            <div class="row">
                <div class=" ">
                    <p>
                        <span ng-show="article.title.leftNumFlag">剩余<span ng-bind="article.title.leftNum" class="h4 text-danger"></span>字</span>
                        <span ng-bind="article.title.errorMsg" ng-show="article.title.errorFlag" class="text-danger"></span>
                    </p>
                    <h4 ng-bind="article.title.value" ng-hide="article.editFlag" class="pull-left paddingT_2 paddingH_3"></h4>
                    <div class="form-group {{article.title.errorClass}}">
                        <input type="text" ng-model="article.title.value" ng-hide="!article.editFlag" ng-focus="calcLeftNum('title')" ng-change="calcLeftNum('title')" ng-blur="article.title.leftNumFlag=false;" maxlength="{{article.title.define.maxLength}}" class="pull-left form-control input-lg col-lg-3 " >
                    </div>
                    <hr class="hr-info col-lg-12 col-md-12 col-sm-12 col-xs-12" >
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                    <p class="text-muted row">
                        <span ng-repeat="key in article.keys.content" ng-bind="key.value" ng-show="!article.editFlag" class=" marginR_2 col-lg-1 col-md-1 col-sm-2">
                            <!--<span ng-bind="key"></span>-->
                        </span>
                        <span class="col-lg-2 col-md-2 col-sm-3" ng-repeat="key in article.keys.content" ng-show="article.editFlag">
                            <input type="text"  maxlength="{{article.keys.define.maxLength}}" ng-show="article.editFlag" ng-model="key.value"  ng-focus="calcLeftNum('keys',$index)" ng-change="calcLeftNum('keys',$index)" ng-blur="key.leftNumFlag=false;" class="form-control input-sm {{article.title.errorClass}}">
                        </span>
                    </p>
                    <p class="row">
                        <span ng-repeat="key in article.keys.content" ng-show="key.leftNumFlag">剩余<span ng-bind="key.leftNum" class="h4 text-danger"></span>字</span>
                        <span ng-repeat="key in article.keys.content" ng-bind="key.errorMsg" ng-show="key.errorFlag" class="text-danger"></span>
                    </p>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 marginT_7">
                    <p>
                        <span ng-show="article.pureContent.leftNumFlag">剩余<span ng-bind="article.pureContent.leftNum" class="h4 text-danger"></span>字</span>
                        <span ng-bind="article.pureContent.errorMsg" ng-show="article.pureContent.errorFlag" class="text-danger"></span>
                    </p>
                    <p ng-bind="article.pureContent.value" ng-hide="article.editFlag"></p>
                    <textarea ng-model="article.pureContent.value" ng-hide="!article.editFlag" maxlength="{{article.pureContent.define.maxLength}}"  ng-focus="calcLeftNum('pureContent')" ng-change="calcLeftNum('pureContent')" ng-blur="article.pureContent.leftNumFlag=false;"></textarea>
                </div>
            </div>
        </div>
    </article>
    <script src="angular.js"></script>
    <script  src="/javascripts/client/article/articleController.js"></script>
</div>
</body>
</html>